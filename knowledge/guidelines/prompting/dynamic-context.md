# Dynamic Context Protocol（動的コンテキスト・プロトコル）

## 問題

単一のコンテキストファイル（例: `AGENTS.md` やシステムプロンプト）だけに依存すると、AI の理解の深さが制限されます。中央の索引が網羅的でない場合、古い情報を使ったり、ハルシネーションを起こしたりする原因になります。また、すべてを 1 ファイルに含めるとコンテキストウィンドウを過剰に消費します。

## 解決策

タスクを開始する前に、AI に対してキーワード検索/セマンティック検索の実行とファイルリンクの追跡を明示的に指示し、ナレッジベースから具体的で関連性の高い詳細を収集させる「調査フェーズ（Research Phase）」を実装します。

## 実装手順

1.  **フェーズ定義**:
    プロンプトの冒頭に、明確に分離された「調査フェーズ（Research Phase）」を作成します。

2.  **明示的な指示**:
    AI に次を命令します:
    - **Search**: ツールを使ってドキュメントを見つける（キーワード/セマンティック）。
    - **Follow Links**: サマリー索引から詳細ファイルへ辿る。
    - **Read**: 内容を読み込みコンテキストにロードする。
    - **Cross-Reference**: 仮定を検証する。

## テンプレ例

```markdown
### 🔍 Dynamic Context Protocol（調査フェーズ）

**タスクを開始する前に、必ず次を行うこと:**

1.  **検索（Search）**: 利用可能なツールを使って、ユーザー要求に関連する `docs/` または `knowledge/` 内の特定ドキュメントを見つける（**キーワード/正規表現検索** または **セマンティック検索**）。
2.  **リンク追跡（Follow Links）**: このファイルはサマリー索引として機能するため、詳細情報を得るためにリンクを必ず辿る。
3.  **読了（Read）**: 詳細ドキュメントの内容をコンテキストにロードする。
4.  **相互参照（Cross-Reference）**: 仮定に頼らない。見つけた公式ドキュメントに照らして常に検証する。
```

## 利点

- **正確性（Accuracy）**: AI が利用可能な中で最も具体的で詳細な情報を使うことを保証します。
- **スケーラビリティ（Scalability）**: 主要コンテキストファイルを肥大化させずに、ナレッジベースを成長させられます。
- **自律性（Autonomy）**: 事前にロードされたコンテキストへ受動的に依存するのではなく、AI が能動的に情報を探すことを促します。
