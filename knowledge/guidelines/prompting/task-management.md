# `#todo` によるタスク管理

## 問題

カスタムプロンプトで複数の複雑な操作（例: コンテキスト分析、複数ファイル生成、リンク検証）を要求すると、Copilot が手順を飛ばしたり進捗を見失ったりして、結果が不完全になることがあります。

## 解決策

プロンプトの冒頭で `#todo` ツールを使ってタスクを明示的に登録し、最後に検証ステップを要求することで、構造化された実行を強制します。

## 実装手順

1.  **タスク初期化**:
    プロンプトの最初（ロール定義の直後）に、Copilot が直ちに `#todo` ツールを使って高レベルタスクをすべて登録するよう指示します。

    > [!IMPORTANT]
    > TODO 項目と作業ステップが一致していることを確認してください。一致していない場合、AI は進捗チェックで誤りを起こす可能性があります。

2.  **最終検証**:
    プロンプト末尾に「Final Check」セクションを追加し、登録した todo がすべて完了していることを Copilot に確認させます。

## テンプレ例

```markdown
# Role: [Role Name]

...

## 📋 Task Initialization

進捗を追跡するため、`#todo` ツールを **直ちに** 使って次のタスクを登録してください:

1.  **Step 1**: [Description of step 1]
2.  **Step 2**: [Description of step 2]
3.  **Validation**: Perform checks.
4.  **Final Check**: Review the "Final Check" section.

... [Rest of the prompt] ...

## ✅ Final Check

**終了前に確認:**

- [ ] すべての todo が完了としてマークされている。
- [ ] すべての要件が満たされている。
```

## 利点

- **可視性（Visibility）**: ユーザーは「todo」ビューで計画タスクを確認できます。
- **完全性（Completeness）**: 複雑なワークフローで手順漏れが起きるリスクを減らします。
- **自己修正（Self-Correction）**: チェックリストに照らして自分の作業を見直すことをモデルに促します。
