[← ワークフローへ戻る](./workflow.md)

# リリースタスク詳細

## 概要

アプリケーションをリリースする際は、リリースストーリーを作成します。
個別ストーリーにするほどではないバグ修正や小タスクは、リリースストーリーへ紐づけます。

## タスクリスト

1. [バージョンとタグ名の合意](#1-agree-on-version--tag-name)
2. [関連修正の確認](#2-verify-related-fixes)
3. [サニティテスト実施](#3-run-sanity-test)
4. [脆弱性チェック](#4-vulnerability-check)
5. [静的解析](#5-static-analysis)
6. [ドキュメント更新](#6-update-documentation)
7. [ライセンスチェック](#7-license-check)
8. [リリースチェックリスト作成](#8-create-release-checklist)
9. [プレリリースチェック実行](#9-run-pre-release-checks)
10. [完了条件の定義](#10-define-exit-criteria)
11. [リリース実行](#11-execute-release)
12. [完了条件の検証](#12-verify-exit-criteria)

---

<a id="1-agree-on-version--tag-name"></a>

### 1. バージョンとタグ名の合意

**成果物**: プロジェクト管理ツール上の合意記録

**目的**: リリースバージョンの命名規則と内容を明確化します。

**作業内容**:

- セマンティックバージョニング（SemVer）に基づくバージョン決定。
- Git タグ名の決定。
- リリースノートの中核コンテンツをドラフトする。
- チケットに合意内容を記録する。
  - **テンプレート**: [リリース版合意](../templates/issues/task_version_agreement.md)

**チェックポイント**:

- [ ] [リリース版合意](../templates/issues/task_version_agreement.md) を使って検証する。

---

<a id="2-verify-related-fixes"></a>

### 2. 関連修正の確認

**成果物**: プロジェクト管理ツール上の確認結果

**目的**: リリースストーリーに紐づく変更がすべて含まれていることを保証します。

**作業内容**:

- リリースストーリーに紐づくバグ修正を確認する。
- リリースストーリーに紐づく機能追加/変更を確認する。
- マージ漏れを確認する。
- コンフリクト解消を確認する。
- 確認結果をチケットに記録する。
  - **テンプレート**: [関連修正の確認](../templates/issues/task_verify_related_fixes.md)

**チェックポイント**:

- [ ] [関連修正の確認](../templates/issues/task_verify_related_fixes.md) を使って検証する。

---

<a id="3-run-sanity-test"></a>

### 3. サニティテスト実施

**成果物**: サニティテスト結果（Issue）

- **テンプレート**: [サニティテストタスク](../templates/issues/task_test_sanity.md)

**目的**: リリース候補が追加テストに進めるだけ安定していることを確認します。

**作業内容**:

- リリース候補をステージング/テスト環境へデプロイする。
- `docs/tests/sanity.md` に基づきサニティテスト項目を実行する。
- 合否を記録する。

**チェックポイント**:

- [ ] [サニティテストタスク](../templates/issues/task_test_sanity.md) を使って検証する。

---

<a id="4-vulnerability-check"></a>

### 4. 脆弱性チェック

**成果物**: 脆弱性チェック結果（Issue）

**目的**: セキュリティリスクを特定し、対処します。

**作業内容**:

- 依存ライブラリの脆弱性スキャン。
  - Python: `pip-audit` または `safety`
  - Node.js: `npm audit` または `yarn audit`
- 既知の脆弱性データベースと照合する。
- 検出された脆弱性に対処する。
  - Critical/High: 必ず修正する。
  - Medium: リスク評価し判断する。
  - Low: 記録し将来対応を検討する。
- **テンプレート**: [脆弱性チェックタスク](../templates/issues/task_vulnerability_check.md)

**チェックポイント**:

- [ ] [脆弱性チェックタスク](../templates/issues/task_vulnerability_check.md) を使って検証する。

---

<a id="5-static-analysis"></a>

### 5. 静的解析

**成果物**: 静的解析結果（プロジェクト管理ツール）

**目的**: 静的解析により潜在バグや品質問題を検出します。

**作業内容**:

- 静的解析ツールを実行する。
- 検出された問題を分析する。
- 高優先度の問題を修正する。
- False Positive を判断し記録する。
- チケットにチェック結果を記録する。
  - **テンプレート**: [静的解析タスク](../templates/issues/task_static_analysis.md)

**チェックポイント**:

- [ ] [静的解析タスク](../templates/issues/task_static_analysis.md) を使って検証する。

---

<a id="6-update-documentation"></a>

### 6. ドキュメント更新

**成果物**: 更新済みドキュメント（Git）

- **テンプレート**: [ドキュメント更新](../templates/issues/task_docs_update.md)

**目的**: ユーザーと開発者が最新情報にアクセスできるようにします。

**作業内容**:

- README.md を更新する。
- CHANGELOG.md もしくは変更履歴を更新する。
- HowToUse/チュートリアルを更新する。
- API 仕様を更新する（該当する場合）。
- 依存一覧を更新する。

**チェックポイント**:

- [ ] [ドキュメント更新](../templates/issues/task_docs_update.md) を使って検証する。

---

<a id="7-license-check"></a>

### 7. ライセンスチェック

**成果物**: ライセンス一覧ファイル（Git）

**目的**: ライブラリのライセンスが適切であることを確認し、法的リスクを回避します。

**作業内容**:

- 依存関係のライセンス一覧を取得する。
- ライセンス一覧ファイルを更新する。
- Git にコミットする。
- ライセンス種別を確認する。
- 問題のあるライセンスを特定し対処する。
- ライセンス通知を更新する。
- 確認結果をチケットに記録する。
  - **テンプレート**: [ライセンスチェックタスク](../templates/issues/task_license_check.md)

**チェックポイント**:

- [ ] [ライセンスチェックタスク](../templates/issues/task_license_check.md) を使って検証する。

---

<a id="8-create-release-checklist"></a>

### 8. リリースチェックリスト作成

**成果物**: プロジェクト管理ツール上のチェック項目

**目的**: リリース前の最終チェック基準を明確化します。

**作業内容**:

- チケットにリリースチェック項目を記録する。含める内容:
  - 動作確認（リリースに紐づく機能検証）。
  - 品質/セキュリティ（脆弱性、静的解析、ライセンス）。
  - ドキュメント（README 更新など）。
  - リリース成果物（ビルド出力など）。
  - バージョン管理（タグ、コミット）。
- **テンプレート**: [リリースチェックリスト](../templates/issues/task_release_checklist.md)

**チェックポイント**:

- [ ] [リリースチェックリスト](../templates/issues/task_release_checklist.md) を使って検証する。

---

<a id="9-run-pre-release-checks"></a>

### 9. プレリリースチェック実行

**成果物**: プロジェクト管理ツール上の確認結果

**目的**: リリース条件が満たされていることを確認します。

**作業内容**:

- 8 で作成した項目に基づいてチェックを実行する。
- 各項目の結果を記録する。
- 発見された問題に対処する。
- 確認結果をチケットに記録する。

**チェックポイント**:

- [ ] 全チェック項目を実行した。
- [ ] 全チェック項目が合格した。
- [ ] 問題に適切に対処した。
- [ ] 確認結果をチケットに記録した。

---

<a id="10-define-exit-criteria"></a>

### 10. 完了条件の定義

**成果物**: 完了条件ドキュメント（Issue）

- **テンプレート**: [完了条件の定義](../templates/issues/task_define_exit_criteria.md)

**目的**: リリース完了の基準を明確化します。

**必須項目**:

- [ ] プレリリースチェックを実行し合格した。
- [ ] リリースが完了した。
  - [ ] リリースページを作成した。
  - [ ] リリース告知を送信した。
  - [ ] Git タグを作成した。
  - [ ] リリース成果物を公開した。

**チェックポイント**:

- [ ] [完了条件の定義](../templates/issues/task_define_exit_criteria.md) を使って検証する。

---

<a id="11-execute-release"></a>

### 11. リリース実行

**成果物**: リリースページ、リリース成果物

**目的**: 新バージョンを正式にリリースします。

**作業内容**:

- Git タグを作成する。
- **テンプレート**: [リリース実行](../templates/issues/task_release_execution.md)
- GitHub Release ページを作成する。
- パッケージレジストリへ公開する（該当する場合）。
- リリース告知を送信する。

**チェックポイント**:

- [ ] [リリース実行](../templates/issues/task_release_execution.md) を使って検証する。

---

<a id="12-verify-exit-criteria"></a>

### 12. 完了条件の検証

**成果物**: プロジェクト管理ツール上の確認結果

**目的**: リリースストーリーが完了基準を満たしていることを確認します。

**作業内容**:

- 完了条件に基づく最終確認。
- **テンプレート**: [完了条件の検証](../templates/issues/task_verify_exit_criteria.md)
- すべての成果物の検証。
- 確認結果をチケットのコメントとして記録する。

**チェックポイント**:

- [ ] [完了条件の検証](../templates/issues/task_verify_exit_criteria.md) を使って検証する。
