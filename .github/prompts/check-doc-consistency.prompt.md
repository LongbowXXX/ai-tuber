---
description: プロジェクトドキュメントの整合性をチェックし、修正提案を行う
agent: agent
---

# プロジェクトドキュメント整合性チェック

あなたはプロジェクトドキュメントの品質管理専門家です。
プロジェクトの README.md を起点として、すべてのドキュメントの整合性を検証し、必要な修正を提案・実施します。

## チェック対象

### 1. ドキュメント構造の完全性

- **README.md からのたどりやすさ**

  - README がプロジェクトのエントリーポイントとして機能しているか
  - 重要なドキュメントへのリンクが適切に配置されているか
  - リンク切れがないか(ファイルパス、URL、アンカーリンクすべて)
  - ドキュメント間の参照関係が論理的で循環参照がないか

- **利用者視点での理解経路**
  - 初めての利用者が README から順に読んで全体を理解できるか
  - セットアップ → 基本的な使い方 → 高度な機能 という流れが自然か
  - 各ドキュメントの目的と対象読者が明確か

### 2. DRY 原則(Don't Repeat Yourself)の遵守

- **重複コンテンツの検出**

  - 同じ情報が複数のドキュメントに記載されていないか
  - 重複がある場合、情報を一元化し、他の箇所からは参照する
  - 設定値、環境変数、依存関係などの情報が複数箇所で矛盾していないか

- **一元化の提案**
  - 共通情報は適切な場所(例: `agents-docs/tech-stack.md`)に集約
  - 他のドキュメントからは Markdown リンクで参照
  - 更新頻度の高い情報は特に一元化を優先

### 3. 実装との整合性

- **コードとの矛盾チェック**

  - ドキュメントに記載されているファイルパス、クラス名、関数名が実際に存在するか
  - 使用例やコマンドが実際に動作するか
  - 環境変数やコンフィグキーがコード内で実際に使用されているか
  - `.env_sample` とドキュメントの説明が一致しているか

- **pyproject.toml との整合性**

  - 依存関係の説明が最新か
  - スクリプトやコマンドの説明が正確か
  - バージョン要件が明記されているか

- **ディレクトリ構造**
  - `agents-docs/directory-structure.md` が実際の構造と一致しているか
  - 新しいモジュールやファイルが追加された際にドキュメントが更新されているか

### 4. プロジェクト固有ルール

`.github/copilot-instructions.md` に記載されているルールに従って:

- `agents-docs/` の各ドキュメントが相互に矛盾していないか
- プロンプトファイル(`stage_agents/resources/*.md`)の説明が適切か
- 開発ワークフローとテスト手順が正確か

## 実行手順

1. **README.md を読み込む**

   - エントリーポイントとして、構造を把握
   - すべてのリンクをリストアップ

2. **リンク先ドキュメントを順次確認**

   - リンクが有効か検証
   - 各ドキュメントの内容を読み込む
   - さらなる参照先があれば追跡

3. **agents-docs/ ディレクトリを包括的にチェック**

   - 各ドキュメントファイルを読み込む
   - 重複や矛盾を検出
   - 実装ファイルとの整合性を確認

4. **問題のある箇所をリストアップ**

   - リンク切れ
   - 重複コンテンツ
   - 実装との不一致
   - 利用者視点での不明瞭な箇所

5. **修正提案または実施**
   - 軽微な修正(リンク切れ、タイポなど)は即座に修正
   - 構造的な変更が必要な場合は、修正案を提示
   - DRY 原則に基づく再構成を提案

## 出力形式

### チェック結果サマリー

```markdown
## ドキュメント整合性チェック結果

### ✅ 問題なし

- README.md からのリンク構造
- agents-docs/architecture.md の整合性

### ⚠️ 修正推奨

- [ファイル名] [行番号]: [問題の説明]
- 例: agents-docs/directory-structure.md L45: `services/memory/` ディレクトリの説明が欠落

### ❌ 修正必須

- [ファイル名] [行番号]: [問題の説明]
- 例: README.md L23: リンク切れ `docs/setup.md` (ファイルが存在しない)

### 🔄 DRY 原則違反

- 重複コンテンツ: [場所 1] と [場所 2] で同じ情報
- 提案: [統合先] に集約し、他は参照リンクに変更
```

### 修正の実施

修正が必要な箇所について:

- 軽微な修正は即座に実施
- 構造的な変更は提案として提示し、承認後に実施

## 注意事項

- プロジェクト固有の用語(Stage Director, ADK, ChromaMemoryService など)は `.github/copilot-instructions.md` を参照して正確に使用
- コードの動作を変更せず、ドキュメントのみを修正
- 既存のドキュメントスタイルやフォーマットを維持
- 日本語ドキュメントの文体や用語の統一性も確認
