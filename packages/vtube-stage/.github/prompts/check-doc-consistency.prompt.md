---
name: check-doc-consistency
description: プロジェクトドキュメントの一貫性をチェックし、修正を提案します。
agent: Librarian
---

# スキル: ドキュメント一貫性チェック

あなたは **@Librarian** をサポートしています。あなたの目標は、プロジェクトの `README.md` から始まるすべてのドキュメントの一貫性を検証し、必要な修正を提案または実装することです。

## 📋 タスクの初期化

**直ちに** `#todo` ツールを使用して、進行状況を追跡するために以下のタスクを登録してください：

1.  **ドキュメントの読み込み**: プロジェクトルートの `README.md` とエージェントドキュメントを読み込みます。
2.  **リンクの検証**: ファイルパス、相対リンク、およびルートからのナビナビリティをチェックします。
3.  **内容の一貫性の検証**: ディレクトリ構造、技術スタック、およびコード参照をチェックします。
4.  **オンボーディングの検証**: セットアップ -> ビルド -> 使用方法 -> アーキテクチャのフローをチェックします。
5.  **レポート生成**: 調査結果のサマリー（合格/警告/エラー）を作成します。
6.  **修正の提案/実装**: 単純な問題は自動修正し、複雑な問題は提案します。
7.  **最終確認**: 「最終確認」セクションを確認してください。

## 🎯 目的

以下を確認してください：

1.  **構造が完全であること**: プロジェクトルートの `README.md` が適切なエントリポイントとして機能し、すべてのリンクが機能していること。
2.  **内容が一貫していること**: ドキュメントが実際のコードベース（ファイル、クラス、設定）と一致していること。
3.  **DRY 原則が守られていること**: 情報が不必要に重複していないこと。
4.  **プロジェクトルールが満たされていること**: ドキュメントが `docs/` 構造およびその他のプロジェクトの慣習に従っていること。
5.  **ナビナビリティが完全であること**: プロジェクトルートの `README.md` からリンクをたどることですべてのドキュメントに到達できること。
6.  **オンボーディングがスムーズであること**: 新しいユーザーがセットアップ、ビルド、使用方法、およびアーキテクチャの情報を簡単に見つけられること。

## 🛠️ 実行ステップ

### ステップ 1: ドキュメントの読み込み

1.  **エントリポイントの読み込み**:

    - プロジェクトルートの `README.md` を読み込みます。
    - 主要なセクションと他のドキュメントへのリンクを特定します。

2.  **エージェントドキュメントの読み込み**:
    - `docs/` 内のファイルをリストします。
    - `docs/architecture/directory-structure.md`、`docs/architecture/tech-stack.md`、`docs/architecture/key-flows.md` などの主要なドキュメントを読み込みます。

### ステップ 2: リンクとナビナビリティの検証

1.  **リンクの抽出**:

    - 読み込んだドキュメント内のすべてのファイルパスと相対リンクを特定します。

2.  **存在の検証**:

    - リンクされたファイルやディレクトリが実際に存在することを確認します。
    - 壊れた画像やデッドリンクをチェックします。

3.  **到達可能性のチェック**:
    - プロジェクトルートの `README.md` からリンクをたどることで、すべてのドキュメントファイルに到達できることを確認します。
    - 存在するがリンクされていない「孤立した」ドキュメントを特定します。

### ステップ 3: 内容の一貫性の検証

1.  **ディレクトリ構造**:

    - `docs/architecture/directory-structure.md` をプロジェクトルートおよび主要なサブディレクトリの実際のディレクトリ構造と比較します。
    - ドキュメント内の不足している、または古いディレクトリをメモします。

2.  **技術スタックと設定**:

    - `docs/architecture/tech-stack.md` を `pyproject.toml`、`package.json`、またはその他の設定ファイルと比較します。
    - バージョンと依存関係が一致していることを確認します。

3.  **コード参照**:

    - ドキュメントで特定のクラスや関数に言及している場合、それらがまだ存在し、正しく命名されていることを確認します。

4.  **オンボーディングフロー**:
    - 新しいユーザーが **環境セットアップ** -> **ビルド/実行** -> **使用方法** -> **アーキテクチャ** のパスをスムーズにたどれることを確認します。
    - これらのセクションが明確に表示され、論理的に並んでいることを確認します。

### ステップ 4: レポートと修正

1.  **レポート生成**:

    - 以下のカテゴリで調査結果のサマリーを作成します：
      - ✅ **合格**: 一貫している項目。
      - ⚠️ **警告**: 軽微な不一致または潜在的な問題。
      - ❌ **エラー**: 壊れたリンク、不足しているファイル、または重大な矛盾。

2.  **修正の提案/実装**:
    - **自動修正**: タイポや壊れた相対パスなどの単純な問題については、直ちに修正します。
    - **提案**: 構造的な変更や不足している内容については、レポートで推奨される変更を説明します。

## 📤 出力形式

調査結果を以下の形式で提示してください：

```markdown
# ドキュメント一貫性レポート
```
