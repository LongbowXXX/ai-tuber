# 計画エージェントのプロジェクト特化

**日時:** 2025 年 11 月 26 日  
**目的:** 汎用的な計画エージェント（my-plan.agent.md）を VTuber Behavior Engine プロジェクト専用に特化させる

---

## 概要

汎用的な計画エージェント `my-plan.agent.md` を、VTuber Behavior Engine プロジェクト固有の設計ドキュメント、コーディング規約、アーキテクチャ情報を組み込んだ専用の計画エージェント `vtuber-plan.agent.md` に変換しました。これにより、計画作成時にプロジェクトの設計思想や規約を理解した上で、より具体的で実行可能な計画を作成できるようになりました。

---

## 対話の流れ

### 1. 最初の質問・依頼

ユーザーが計画エージェント（my-plan.agent.md）をプロジェクト固有の情報で特化させたいと依頼。

**Copilot の応答:**

- プロジェクトの設計ドキュメント（copilot-instructions.md、agents-docs/、instructions/）を調査
- 以下の情報を計画エージェントに追加：
  - プロジェクト概要（技術スタック、アーキテクチャ、主要コンポーネント）
  - ドキュメント参照テーブル
  - コーディング規約の必須チェック項目
  - 新規ステージ追加時の標準手順
  - テスト規約
  - 影響範囲セクション付きの計画テンプレート

### 2. 削除した文章の復元

ユーザーが「あなたの反復的な<workflow>。。。」の文章が削除されていることを指摘。

**Copilot の応答:**
意図せず削除してしまった文章を復元し、プロジェクト固有の表現を追加。

### 3. 検索手法の追加

ユーザーがコード検索だけでなくセマンティック検索も活用するよう依頼。

**Copilot の応答:**
`<plan_research>` セクションに「調査手法」を追加：

- セマンティック検索：概念や機能の意図を理解
- コード検索（grep）：正確なシンボル名を検索
- ファイル検索：特定のファイルパターンを検索

### 4. ファイル名の変更

ユーザーがファイル名を `name` フィールド（VTuberPlan）と合わせるよう依頼。

**Copilot の応答:**
`my-plan.agent.md` → `vtuber-plan.agent.md` にリネーム。

---

## 重要なポイント

- **コンテキストの与え方:** プロジェクトの設計ドキュメント（copilot-instructions.md、agents-docs/、instructions/）を事前に読み込み、計画エージェントに必要な情報を抽出
- **効果的だった指示:** 段階的なフィードバック（削除された文章の指摘、検索手法の追加、ファイル名の統一）により、品質を向上
- **改善点:** 最初の変更時に元のワークフロー説明文を保持すべきだった

---

## 成果物

### 更新されたファイル

`vtuber-plan.agent.md` - プロジェクト特化型計画エージェント

### 主な変更点

1. **名前変更**: `MyPlan` → `VTuberPlan`
2. **プロジェクト概要追加**: 技術スタック、アーキテクチャ図、主要コンポーネント一覧
3. **プロジェクト知識セクション**: ドキュメント参照、コーディング規約チェックリスト、新規ステージ追加手順
4. **調査手法の明確化**: セマンティック検索 + コード検索 + ファイル検索の併用
5. **計画テンプレート拡張**: 影響範囲セクション、コーディング規約チェックリスト

---

## 学んだこと・Tips

- 計画エージェントをプロジェクト特化させる際は、設計ドキュメントだけでなく instructions ファイルも参照すると効果的
- 検索は単一手法に頼らず、セマンティック検索とコード検索を併用することで見逃しを防げる
- エージェントファイルの名前（`name` フィールド）とファイル名を一致させると管理しやすい
- 既存の文章を変更する際は、元の意図を損なわないよう注意が必要

---

## タグ

`#GitHub-Copilot` `#Agent` `#計画エージェント` `#vtuber-behavior-engine` `#プロジェクト特化`
