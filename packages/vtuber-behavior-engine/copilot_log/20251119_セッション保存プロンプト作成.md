# セッション保存プロンプト作成

**日時:** 2025 年 11 月 19 日  
**目的:** Copilot とのチャットセッション内容を記録・共有するためのカスタムプロンプトファイルを作成し、チーム全体の AI 活用スキル向上を図る

---

## 概要

VS Code の GitHub Copilot のカスタムプロンプトファイル機能を利用して、チャットセッションを構造化して保存するためのプロンプトファイル (`save-copilot-session.prompt.md`) を作成しました。このプロンプトにより、AI との対話内容を体系的に記録し、効果的な命令の仕方やコンテキストの与え方をチーム内で共有できるようになりました。

---

## 対話の流れ

### 1. 最初の依頼

**ユーザー:**

```
Follow instructions in create-custom-prompt.prompt.md.
Copilotとのチャットセッションの内容をまとめてファイルに保存するためのプロンプトを作成してください。

保存の目的は、どのような対話をCopilotと行ったのかを記録し、AIを使い慣れていない人の参考にするためです。
AI への命令の仕方、コンテキストの与え方などを、チームで共有することでAI活用スキルのチーム全体での向上を目的とします。

出力は copilot_log/年月日時分秒_<title>.md
```

**Copilot の応答:**

- まず公式ドキュメント (https://code.visualstudio.com/docs/copilot/customization/prompt-files) を取得
- 要件を分析し、以下を自動推論:
  - **モード**: `agent` (ファイル作成・ディレクトリ操作が必要なため)
  - **ツール**: 無指定 (全ツール有効)
  - **入力変数**: `${input:title:セッションのタイトル}` でタイトルを受け取る設計
- 完全なプロンプトファイルの内容を提案

### 2. ファイル名の変更

**ユーザー:**

```
save-copilot-session にしてください
```

**Copilot の応答:**

- ファイル名を `save-copilot-session.prompt.md` に変更して `.github/prompts/` ディレクトリに作成
- 使い方を簡潔に案内: `/save-copilot-session タイトル` で実行

### 3. タイトル入力の簡略化

**ユーザー:**

```
セッションタイトルをユーザに聞くのは面倒なので、チャット内容から自動生成するようプロンプトを修正してください。
```

**Copilot の応答:**

- `${input:title:セッションのタイトル}` を `${チャット内容から自動生成したタイトル}` に変更
- プロンプトの指示セクションを修正し、「タイトルはチャットの主要なトピックや目的から自動的に生成」と明記
- ユーザーの手間を最小限にする設計に改善

### 4. プロンプトの実行

**ユーザー:**

```
Follow instructions in save-copilot-session.prompt.md.
```

**Copilot の応答:**

- プロンプトファイルの指示に従い、このセッション内容を構造化して記録
- `copilot_log` ディレクトリを作成し、タイムスタンプ付きのファイル名で保存

---

## 重要なポイント

- **コンテキストの与え方:**

  - 最初に既存のプロンプトファイル (`create-custom-prompt.prompt.md`) を参照させることで、プロンプト作成の標準手順に従わせた
  - 公式ドキュメントの取得を指示に含めることで、最新の仕様に基づいた正確な内容を生成できた

- **効果的だった指示:**

  - 「ユーザー負荷を最小限に」という要件を明示することで、自動推論・デフォルト値活用を促進
  - 段階的な改善 (ファイル名変更 → タイトル自動生成) により、スムーズに要件を満たせた
  - `Follow instructions in [file]` という簡潔な指示で、作成したプロンプトを即座に実行できた

- **改善点:**
  - 最初から「タイトルは自動生成」と指定すれば、修正の手間が省けた
  - ファイル名のタイムスタンプ形式について、より詳細な仕様 (秒まで含むか、日付のみか) を最初に明確化できた

---

## 成果物

### 作成されたファイル

1. **`.github/prompts/save-copilot-session.prompt.md`**

   - Copilot チャットセッションを記録するカスタムプロンプト
   - モード: `agent`
   - 機能: チャット内容から自動的にタイトルを生成し、構造化された Markdown ファイルとして保存

2. **`copilot_log/20251119_セッション保存プロンプト作成.md`** (このファイル)
   - プロンプト作成セッションの記録
   - AI 活用のベストプラクティスを含む

### プロンプトファイルの構造

```yaml
---
description: Copilotとのチャットセッションを記録し、AI活用のナレッジを共有する
agent: agent
---
```

### 出力フォーマット

- 日時・目的
- 概要
- 対話の流れ (時系列)
- 重要なポイント (コンテキスト・効果的な指示・改善点)
- 成果物
- 学んだこと・Tips
- タグ

---

## 学んだこと・Tips

- **カスタムプロンプトファイルの効果的な作り方**:

  - 公式ドキュメントを必ず参照する
  - ユーザー入力を最小限にする (自動推論・デフォルト値の活用)
  - 適切な `agent` モードの選択 (質問応答は `ask`、ファイル操作は `agent`)

- **プロンプト設計のベストプラクティス**:

  - 達成したいことと期待する出力形式を明確に記述
  - 具体例を含める (ファイル名の例、タイトルの例など)
  - 段階的な指示で実行順序を明確化

- **チーム共有のための記録方法**:

  - 対話の流れを時系列で整理
  - 「重要なポイント」セクションで AI 活用のノウハウを抽出
  - タグ付けで後から検索しやすくする

- **VS Code Copilot の活用テクニック**:
  - カスタムプロンプトファイルを `/プロンプト名` で簡単に呼び出せる
  - プロンプトファイル内で他のプロンプトファイルを参照できる (`Follow instructions in [file]`)
  - ワークスペースプロンプト (`.github/prompts/`) でプロジェクト固有のワークフローを標準化

---

## タグ

`#GitHub-Copilot` `#カスタムプロンプト` `#AI活用` `#ナレッジ共有` `#vtuber-behavior-engine` `#チーム開発` `#ベストプラクティス`
