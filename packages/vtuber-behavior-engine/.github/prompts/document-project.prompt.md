---
description: LLM向けプロジェクトドキュメントを整備・更新する
agent: agent
---

# プロジェクトドキュメント整備アシスタント

あなたはソフトウェアプロジェクトのアーキテクチャドキュメントを整備する専門家です。
LLM が効率的にプロジェクトを理解できるよう、包括的で正確なドキュメントを作成・更新します。

## 目的

大規模プロジェクト(数万行以上)において、LLM が設計を正しく理解し適切な修正を行えるよう、
以下のドキュメントを整備します:

1. **アーキテクチャ概要** - システム全体の構成と設計思想
2. **ディレクトリ構造ガイド** - 各モジュールの責務と依存関係
3. **設計原則とパターン** - コーディング規約と設計パターン
4. **主要フローの解説** - 重要なユースケースの処理フロー
5. **技術スタックと依存関係** - 使用技術と外部連携
6. **テスト戦略とガイド** - テストの構成、実行方法、ベストプラクティス
7. **技術的制約と注意事項** - パフォーマンス、セキュリティ、既知の問題

## 実行手順

### ステップ 1: プロジェクトの分析

まず、以下を調査してプロジェクトの全体像を把握します:

1. **エントリーポイントの特定**

   - `main.py`, `index.ts`, `App.tsx`などのメインファイル
   - パッケージマネージャーの設定(`package.json`, `pyproject.toml`, `pom.xml`など)
   - ビルド設定やスクリプト

2. **ディレクトリ構造の理解**

   - ルートディレクトリの構成を確認
   - 主要なサブディレクトリの役割を推測
   - `src/`, `lib/`, `tests/`などの標準的な構造

3. **依存関係の確認**

   - 使用しているフレームワークとライブラリ
   - 内部モジュール間の依存関係
   - 外部サービスとの連携(API, データベースなど)

4. **既存ドキュメントの確認**
   - `README.md`, `ARCHITECTURE.md`, `docs/`ディレクトリ
   - コード内のコメントや docstring
   - 既存の設計資料との整合性チェック

### ステップ 2: ドキュメントの生成

以下のドキュメントを`agents-docs/`ディレクトリに作成します。
各ドキュメントの先頭には以下のコメントを必ず追加してください:

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->
```

#### 1. `agents-docs/architecture.md` - アーキテクチャ概要

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# アーキテクチャ概要

## システム概要

[プロジェクトの目的と全体像]

## 主要コンポーネント

[システムを構成する主要な要素とその責務]

## アーキテクチャ図

[Mermaid 等でコンポーネント図やシーケンス図を記載]

## データフロー

[データがシステム内をどう流れるか]

## 設計の背景と判断理由

[なぜこのアーキテクチャを選択したか]
```

#### 2. `agents-docs/directory-structure.md` - ディレクトリ構造ガイド

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# ディレクトリ構造ガイド

## 全体構成

[ディレクトリツリーの概要]

## 各ディレクトリの責務

### `/src/components/`

- **役割**: [説明]
- **主要ファイル**: [リスト]
- **依存関係**: [他のモジュールとの関係]

[各ディレクトリについて同様に記載]

## モジュール間の依存関係図

[Mermaid で依存関係を可視化]

## レイヤー構造

[プレゼンテーション層、ビジネスロジック層、データアクセス層など]
```

#### 3. `agents-docs/coding-conventions.md` - 設計原則とパターン

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# 設計原則とコーディング規約

## 設計原則

[SOLID の原則、DRY、YAGNI 等、プロジェクトで重視する原則]

## 採用している設計パターン

[Factory, Strategy, Observer 等、実際に使用しているパターン]

## 命名規則

- ファイル名: [規則]
- クラス名: [規則]
- 関数名: [規則]
- 変数名: [規則]

## コードスタイル

[フォーマッター、リンターの設定と規約]

## テストの方針

[テストの書き方、カバレッジ目標等]
```

#### 4. `agents-docs/key-flows.md` - 主要フローの解説

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# 主要な機能フロー

## エントリーポイント

[アプリケーションの起動フローと初期化処理]

## ユースケース 1: [機能名]

### 概要

[何をする機能か]

### シーケンス図

[Mermaid でシーケンス図]

### 関連ファイル

- `path/to/file1.py` - [役割]
- `path/to/file2.py` - [役割]

### 処理の流れ

1. [ステップ 1]
2. [ステップ 2]
   ...

[他の主要ユースケースについても同様に記載]
```

#### 5. `agents-docs/tech-stack.md` - 技術スタックと依存関係

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# 技術スタックと依存関係

## 主要な技術スタック

- **言語**: [バージョン]
- **フレームワーク**: [名前とバージョン]
- **データベース**: [種類とバージョン]

## 主要な依存ライブラリ

| ライブラリ | バージョン | 用途   |
| ---------- | ---------- | ------ |
| [名前]     | [version]  | [説明] |

## 外部サービスとの連携

- **[サービス名]**: [用途と API エンドポイント]

## 開発ツール

- ビルドツール: [名前]
- テストフレームワーク: [名前]
- CI/CD: [名前]
```

#### 6. `agents-docs/testing.md` - テスト戦略とガイド

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# テスト戦略とガイド

## テスト構成

[テストディレクトリの構造とテストファイルの配置]

## テストの種類

### ユニットテスト

[単体テストの方針、モック/スタブの使い方]

### 統合テスト

[統合テストの範囲と実行方法]

### E2E テスト

[エンドツーエンドテストの対象と実行方法]

## テスト実行方法

[テストコマンド、環境設定、CI/CD での実行]

## カバレッジ目標

[カバレッジ目標値と測定方法]

## テストデータの管理

[フィクスチャ、テストデータの作成・管理方法]

## テストのベストプラクティス

[命名規則、テストケースの書き方、注意事項]

## よくあるテスト問題と解決策

[テスト実行時の問題とトラブルシューティング]
```

#### 7. `agents-docs/constraints-and-gotchas.md` - 技術的制約と注意事項

```markdown
<!-- このドキュメントは .github/prompts/document-project.prompt.md によって生成・更新されています -->

# 技術的制約と注意事項

## パフォーマンス要件

[レスポンスタイム、スループット等の要件]

## セキュリティ考慮事項

[認証、認可、データ保護等]

## 既知の技術的負債

[リファクタリングが必要な箇所とその理由]

## よくあるトラブルと対処法

[開発中に遭遇しやすい問題とその解決方法]

## 制約事項

[技術的な制限、ライセンス制約等]
```

### ステップ 3: 実装との整合性チェック

生成したドキュメントが実装と一致しているか検証します:

1. **コードとの照合**

   - ドキュメントに記載されたファイルが実際に存在するか
   - クラスや関数名が正確か
   - 依存関係が正しいか

2. **最新性の確認**

   - 最近の変更がドキュメントに反映されているか
   - 廃止された機能や古い情報がないか

3. **網羅性の評価**
   - 主要な機能がすべてカバーされているか
   - 重要な技術的判断が記録されているか

### ステップ 4: メンテナンス指針の提案

ドキュメントが実装と乖離しないよう、以下を提案します:

1. **ドキュメント更新のタイミング**

   - 新機能追加時
   - アーキテクチャ変更時
   - 主要なリファクタリング時

2. **レビュープロセス**

   - PR レビュー時のドキュメント確認
   - 定期的なドキュメントレビュー

3. **自動化の提案**
   - ドキュメントの整合性チェックツール
   - コード変更時のドキュメント更新リマインダー

## 出力形式

1. **分析結果のサマリー**: プロジェクトの特徴と構造の概要
2. **生成したドキュメント**: 各ファイルの内容
3. **整合性チェック結果**: 見つかった問題点と推奨事項
4. **メンテナンス計画**: ドキュメントを最新に保つための提案

## 注意事項

- 実装されているコードを基に正確なドキュメントを作成する
- 推測や想像で書かず、不明点は明記する
- Mermaid 記法を活用して図を含める
- LLM が理解しやすい構造化された形式を使用する
- 既存のドキュメントがある場合は、それを尊重しつつ更新する
- プロジェクト固有の用語や概念は明確に定義する

## 使用例

```
# 現在のワークスペース全体のドキュメントを整備
/document-project

# 特定のモジュールに焦点を当てる
/document-project src/services モジュールについて詳しく

# 既存ドキュメントの更新チェック
/document-project 既存の agents-docs/architecture.md が実装と一致しているか確認して更新
```

---

このプロンプトを実行すると、LLM がプロジェクトを体系的に分析し、
開発に必要なドキュメントを自動生成します。
