---
type: requirements
status: draft
---

<!-- この文書は @BusinessAnalyst により生成されました -->

# 要件: 音声認識の切り替えオプション (SpeechRecognitionToggle)

| Metadata    | Value            |
| :---------- | :--------------- |
| **Author**  | @BusinessAnalyst |
| **Created** | 2026-01-01       |
| **Status**  | Draft            |

## 1. 概要

### 問題提起

現在のシステムでは、`SpeechRecognitionTool` が常に初期化・開始されるようになっています。しかし、マイクが利用できない環境や、音声入力を必要としないユースケース（テキストコメントのみで運用する場合など）においても音声認識が動作してしまうため、リソースの無駄遣いやエラーの原因になる可能性があります。

### 目標

音声認識の有効・無効を切り替えるオプションを導入し、ユーザーが環境や用途に合わせて音声認識の使用を選択できるようにします。また、既存の動作（デフォルトで有効など）への影響を最小限に抑えます。

## 2. ユーザーストーリー

### ストーリー 1: 音声認識の無効化

**開発者/ユーザー** として
**設定によって音声認識を無効に** したい
**マイクがない環境でもエラーなくシステムを起動し、不要なリソース消費を抑える** ため

#### 受け入れ基準

- [ ] `AgentsConfig` に音声認識の有効/無効を制御するフラグ（例: `use_speech_recognition`）が追加されていること。
- [ ] フラグが `False` の場合、`SpeechRecognitionTool` が初期化されず、開始もされないこと。
- [ ] 音声認識が提供していた機能（ユーザーの発話取得など）が、無効化時にもシステム全体のクラッシュを引き起こさないこと。
- [ ] デフォルト設定では、既存の動作を維持するために音声認識が有効（`True`）であること。

### ストーリー 2: 音声認識無効時の代替動作の維持

**ユーザー** として
**音声認識を無効にしても**
**YouTube コメントなどの他の入力ソースでキャラクターと対話** し続けたい

#### 受け入れ基準

- [ ] 音声認識を無効にしても、YouTube コメントプロバイダーなどの他の入力ソースが正常に動作すること。
- [ ] エージェントの更新ループにおいて、音声認識ツールが `None` または無効な状態であっても適切にハンドリングされること。

## 3. 制約と前提

- **制約**: 既存の `build_root_agent` や `update_news_context_agent` などのシグネチャへの影響を最小限にする。
- **前提**: 音声認識が無効な場合、音声による割り込みやユーザーからの直接的な話しかけは機能しない。

## 4. レビュー履歴

| Date       | Reviewer         | Comment      | Status |
| :--------- | :--------------- | :----------- | :----- |
| 2026-01-01 | @BusinessAnalyst | 初期ドラフト | Draft  |
