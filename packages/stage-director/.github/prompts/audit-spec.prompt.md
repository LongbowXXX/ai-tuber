---
name: audit-spec
description: 仕様書の曖昧さ、一貫性、およびアーキテクチャへの準拠を監査します。
agent: QualityGuard
---

# スキル: 仕様リンター (仕様監査)

あなたは **@QualityGuard** をサポートしています。あなたの目標は、実装が始まる前に、仕様書（要件、設計、プラン）が明確で一貫性があり、プロジェクト標準に準拠していることを確認するためにレビューすることです。

## 📋 タスク初期化

**直ちに** `#todo` ツールを使用して、以下のタスクを登録してください。

1.  **曖昧さチェック**: 曖昧な表現をスキャンします。
2.  **一貫性チェック**: 厳格な要件と技術設計の間の整合性を検証します。
3.  **アーキテクチャチェック**: `AGENTS.md` のルールへの準拠を確認します。
4.  **レポート生成**: 仕様監査レポートを出力します。

## 🎯 目的

「Garbage In, Garbage Out (ゴミを入れればゴミが出る)」を防ぐために、提供された仕様書をレビューします。開発者が非常に明確で、実現可能で、準拠したプランを持っていることを確認します。

## 🛡️ 監査ステップ

### 1. 曖昧さチェック

- **曖昧な言葉のスキャン**: 以下のようなフレーズを探します。
  - 「たぶん」、「おそらく」、「だいたい」、「約」
  - 「〜できるはず」(厳密に定義されていない限り)
  - 「ユーザーフレンドリー」、「速い」(指標がない場合)
  - 「など」、「その他」
- **アクション**: これらを明確化が必要な警告としてフラグを立てます。

### 2. 一貫性チェック

- **ストーリー vs 設計**: すべてのユーザーストーリーに対応する技術プラン（API エンドポイント、DB スキーマの変更、または UI コンポーネント）があることを確認します。
- **不足している技術的詳細**: ストーリーが新しいフィールドを必要とする場合、DB マイグレーションは指定されていますか？新しいページを暗示している場合、ルートは定義されていますか？

### 3. アーキテクチャ準拠 (AGENTS.md)

- **違反のチェック**:
  - 設計は **Repository パターン** を使用していますか？ (必須)
  - **エージェント** に実行時の役割が誤って割り当てられていませんか？ (エージェントはビルド時のみです)。
  - `AGENTS.md` の厳格なルールに従っていますか？

## 📝 出力形式

**仕様監査レポート** を出力しなければなりません。

```markdown
# 仕様監査レポート

## 1. 概要

[仕様の品質の簡潔な要約。実装の準備はできていますか？]

## 2. 問題点と不一致

### 🔴 致命的 (修正必須)

- [ ] **一貫性**: ユーザーストーリー "X" はデータベースの変更を暗示していますが、設計セクションにスキーマの更新が記載されていません。
- [ ] **アーキテクチャ**: 設計ではコントローラーでの直接的なデータベースクエリが提案されており、Repository パターンに違反しています。

### 🟡 警告 (明確化が必要)

- [ ] **曖昧さ**: 「システムは速い必要がある」 - 「速い」を定義してください (例: < 200ms)。
- [ ] **曖昧さ**: 「さまざまなエラーを処理する」 - 処理すべき特定のエラーコードをリストしてください。

## 3. 結論

[ ] **承認**: 仕様は明確で一貫性があり、準拠しています。実装に進んでください。
[ ] **修正リクエスト**: 進む前に上記の致命的な問題に対処してください。
```
