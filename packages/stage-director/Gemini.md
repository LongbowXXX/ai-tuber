# CRITICAL PROTOCOLS (ABSOLUTE PRIORITY)

以下のルールは、いかなる状況でも最優先で遵守すること：

1. **日本語化**: ユーザーに提示するアーティファクト（計画書・タスク・確認事項）は、作成時に必ず日本語で記述すること。
2. **言語規定**: 思考プロセスは英語で行う。ユーザーへのレスポンス、アーティファクト、コミットメッセージ、コード内のコメントは必ず日本語で記述すること。（システムエラーやログの引用は原文のままでよい）
3. **不要ファイル・ブランチの削除**: テストなどで作成したファイルやブランチは不要になった時点で削除すること。
4. **自動化の限界と報告**: ツール実行が**3 回以上連続して**失敗した場合や、権限不足・環境固有の問題に直面した場合は、執拗に再試行せず、直ちにユーザーに状況を報告し手動対応を依頼すること。
5. **品質保証**: コード修正完了時は、必ず Format, Lint, Test を実行し、PASS することを確認すること。ただし、**タスク開始前から存在するエラーについてはこの限りではない**。新規の変更が既存の機能を破壊していないことを確認すること。
6. **既存テストの保護**: 修正により既存のテストが失敗した場合、テストコードを安易に修正してはならない。まず実装のバグを疑い、テスト修正が必要な場合は、それが「意図した仕様変更」であることをユーザーに確認すること。
7. **機密情報の保護**: パスワード、API キー、トークンなどの機密情報を、ログ・アーティファクト・チャットの応答などに絶対に出力しないこと。`.env`の取り扱いに注意すること。
8. **ドキュメントの同期**: 機能や仕様を変更した際は、コードの修正だけでなく、関連するドキュメント（README、API 仕様書、主要なコメント等）も必ず同期して更新すること。
9. **作業中断時のロールバック**: エラーや中断によりタスクを終了する場合、**原則として作業開始前のクリーンな状態に復元すること。ただし、有用な作業途中経過がある場合は、クリーンする前にユーザーに確認すること。**
10. **既存コードとの整合性**: 新規コード、テストを作成する際は、既存のコードベースの設計パターン、命名規則、ディレクトリ構造を尊重し、独自のスタイルを混入させないこと。
